# This is the build pipeline. Pipelines are the core of wercker
# Read more about pipelines on our dev center
# https://devcenter.wercker.com/development/pipelines/
box:
  id: alpine
build:
  steps:
    - script:
        name: noop
        code: |
          echo 'todo build script here'
test-jvm:
  # This references an OpenJDK container from the
  # Docker Hub https://hub.docker.com/_/openjdk/
  # Read more about containers on our dev center
  # https://devcenter.wercker.com/overview-and-core-concepts/containers/
  box: openjdk:8-jdk
  # Steps make up the actions in your pipeline
  # Read more about steps on our dev center:
  # https://devcenter.wercker.com/development/steps/
  steps:
    # https://github.com/wercker/step-gradle
    - java/gradle:
      task: test
      cache_project_cache: true

test-node:
  # This references the default nodejs container from
  # the Docker Hub: https://registry.hub.docker.com/_/node/
  # If you want Nodesource's container you would reference nodesource/node
  # Read more about containers on our dev center
  # https://devcenter.wercker.com/overview-and-core-concepts/containers/
  box: node:10.9.0-alpine
  # The steps that will be executed on build
  # Steps make up the actions in your pipeline
  # Read more about steps on our dev center:
  # https://devcenter.wercker.com/development/steps/
  steps:
      - script:
        name: install
        code:  |
          cd carbon-crawler-admin-front
          yarn install
      - script: 
        name: test
        code: |
          carbon-crawler-admin-front
          yarn test --cwd carbon-crawler-admin-front
